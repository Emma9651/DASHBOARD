<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body class="bg-secondary">
    <div class="col-lg-4 mx-auto mt-5 shadow rounded-3 p-3">
        <div class="form">
            <h2 class="text-uppercase text-center text-decoration-underline text-info mt-4">Sign Up</h2>
            <label for="firstName" class="fs-4">First-Name:</label>
            <input type="text" class="form-control shadow-none p-2 mb-3 rounded" autofocus placeholder="Enter FirstName"
                id="firstName">
            <label for="lastName" class="fs-4">Last-Name</label>
            <input type="text" class="form-control shadow-none p-2 mb-3 rounded" placeholder="Enter Last-name"
                id="lastName">
            <label for="email" class="fs-4">Email</label>
            <input type="email" class="form-control shadow-none p-2 mb-3 rounded" id="email"
                placeholder="Enter Your Email">
            <label for="password" class="fs-4">Create Password</label>
            <input type="password" class="form-control shadow-none p-2 mb-3 rounded" placeholder="Enter Your Password"
                id="password">
            <button class="btn btn-info w-75 mx-5 text-center" id="submit">Create An Account</button>
        </div>
        <p class="text-light text-center me-5 p-2 fs-5">Already Have An Account? <a href="signin.html">Sign In Here</a>
        </p>
    </div>

    <script>
        const btn = document.getElementById("submit");

        btn.addEventListener('click', () => {
            const fName = document.getElementById("firstName").value;
            const lName = document.getElementById("lastName").value;
            const mail = document.getElementById("email").value;
            const pass = document.getElementById("password").value;

            if (fName=='' || lName== '' || mail== '' || pass== '') {
                alert('Please fill in all the fields!')
                return;
            }
            let users = JSON.parse(localStorage.getItem('users')) ||[];
            let existingUser = users.find(user=>user.electronicM===mail);
            if(existingUser){
                alert("This email is already registered. Please use a different one.")
                return
            }
            const newUser = {
                    firstN: fName,
                    lastN: lName,
                    electronicM: mail,
                    pin: pass
                }
                console.log(newUser);
                users.push(newUser)
                localStorage.setItem('users', JSON.stringify(users))
                alert("Registration successful! Redirecting to Sign In page...")
                setTimeout(() => {
                    window.location.href = 'signin.html'
                }, 2000)
        })
    </script>
</body>

</html>